(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{32:function(e,t,a){e.exports=a(67)},37:function(e,t,a){},65:function(e,t,a){},67:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),r=a(29),o=a.n(r),l=(a(37),a(7)),i=a(8),c=a(10),m=a(9),d=a(11),u=a(13),g=a(14),p=a(1),h=a.n(p),f=a(12),E=a.n(f);var b=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=new RegExp("^.*(?=.{16}).*$"),a=new RegExp("^.*(?=(.*[0-9]){3,}).*$"),s=new RegExp('^.*(?=(.*[!@#$%&*~|? "]){2,}).*$'),n=new RegExp("^.*(?=(.*[a-z]){1,}).*$"),r=new RegExp("^(?=(.*[A-Z]){2,}).*$"),o={PasswordLength:"",ContainsSymbol:"",ContainsNumber:"",ContainsUpperCase:"",ContainsLowerCase:"",Valid:!0};t.test(e)||(o.PasswordLength="Password length should be exactly 16 characters",o.Valid=!1),s.test(e)||(o.ContainsSymbol="password must contain 2 symbols",o.Valid=!1),a.test(e)||(o.ContainsNumber="password must contain 3 numbers",o.Valid=!1),n.test(e)||(o.ContainsLowerCase="password must contain a lowercase letter",o.Valid=!1);var l=e.charAt(0)+e.charAt(1);return r.test(l)||(o.ContainsUpperCase="The first 2 chars must be upper case letters",o.Valid=!1),o};var w=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(m.a)(t).call(this))).sendEmail=function(e,t,a){E.a.get("https://techmybrand.com/sendmail.php?msg=".concat(a,"&subject=").concat(t,"&reciever=").concat(e)).then(function(e){console.log(e.data)})},e.handleSubmit=function(t){t.preventDefault(),h()("#PasswordChecker").hide();var a=e.refs.email.value,s=e.refs.password.value;if(b(s,a).Valid){if(h()("#PasswordChecker li").css({color:"#09ff00",fontWeight:"normal",fontStyle:"normal"}),e.handleConfirmPasswordChange){var n={email:a,password:s,ipAddress:e.state.ipAddress,status:"unsuccessful"};E.a.post("/api/auth",{email:a}).then(function(t){console.log(t.data),t.data.length>0?(console.log("duplicate email"),e.setState({email:a,password:s,attempts:e.state.attempts+1,err:"Email address is already registered"}),h()("#validateErrors").html('<div className="alert alert-danger">Email has already been registered!</div>')):(!function(e){E.a.post("/api/insert",e).then(function(e){return console.log(e.data)})}(n),localStorage.setItem("app_reg_data",JSON.stringify(n)),e.setState({ipAddress:n.ipAddress,registered:!0}),e.sendEmail(a,"Welcome Aboard New User!","You just signup on our test app via this email address. Thanks for being a part of us."),console.log("registered"))}).catch(function(e){console.log(e)})}}else h()("#validateErrors").html('<div className="alert alert-danger">Please check the errors below</div>'),h()("#PasswordChecker").show()},e.handleChange=function(){h()("#PasswordChecker").show();var t=e.refs.password.value,a=b(t,"");a.Valid?h()("#PasswordChecker li").css({color:"#09ff00",fontWeight:"normal",fontStyle:"normal"}):(h()("#PasswordChecker").show(),""===a.PasswordLength?h()(".LengthCheck").css({color:"#09ff00",fontWeight:"normal",fontStyle:"normal"}):h()(".LengthCheck").css({color:"#ff0000",fontWeight:"300",fontStyle:"italic"}),""===a.ContainsSymbol?h()(".SymbolsCheck").css({color:"#09ff00",fontWeight:"normal",fontStyle:"normal"}):h()(".SymbolsCheck").css({color:"#ff0000",fontWeight:"300",fontStyle:"italic"}),""===a.ContainsUpperCase?h()(".UpperCaseCheck").css({color:"#09ff00",fontWeight:"normal",fontStyle:"normal"}):h()(".UpperCaseCheck").css({color:"#ff0000",fontWeight:"300",fontStyle:"italic"}),""===a.ContainsLowerCase?h()(".LowerCaseCheck").css({color:"#09ff00",fontWeight:"normal",fontStyle:"normal"}):h()(".LowerCaseCheck").css({color:"#ff0000",fontWeight:"300",fontStyle:"italic"}),""===a.ContainsNumber?h()(".NumbersCheck").css({color:"#09ff00",fontWeight:"normal",fontStyle:"normal"}):h()(".NumbersCheck").css({color:"#ff0000",fontWeight:"300",fontStyle:"italic"}))},e.handleConfirmPasswordChange=function(){return e.refs.cpassword.value!==e.refs.password.value?(h()("#ConfirmPasswordCheck").text("Your password does not match"),!1):(h()("#ConfirmPasswordCheck").text("Great! your password matches").css({color:"#09ff00",fontWeight:"normal",fontStyle:"normal"}),!0)},e.state={formValid:!1,ipAddress:null,registered:!1},e}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;h.a.ajax({type:"GET",url:"https://ipapi.co/json/",cache:!1,success:function(t){e.setState({ipAddress:t.ip}),console.log(e.state.ipAddress)}})}},{key:"render",value:function(){return!0===this.state.registered?n.a.createElement(g.a,{to:"/"}):n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-5 ml-auto mr-auto mt-4"},n.a.createElement("div",{className:"card",style:{marginTop:"50px",padding:30,borderRadius:20}},n.a.createElement("div",{className:"card-title"},n.a.createElement("h4",{className:"card-heading text-center"},"Welcome, Please signup!"),n.a.createElement("hr",null)),n.a.createElement("div",{className:"card-body"},n.a.createElement("div",{id:"validateErrors"}),n.a.createElement("form",{onSubmit:this.handleSubmit},n.a.createElement("fieldset",null,n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Email"),n.a.createElement("input",{type:"email",className:"form-control",required:!0,ref:"email",placeholder:"Email address"})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Password"),n.a.createElement("input",{type:"password",onChange:this.handleChange,className:"form-control",required:!0,ref:"password",placeholder:"Password"}),n.a.createElement("small",null,n.a.createElement("ul",{id:"PasswordChecker",style:{display:"none"}},n.a.createElement("li",{className:"LengthCheck"},"Your password must be of 16 characters"),n.a.createElement("li",{className:"SymbolsCheck"},"Must contain at least 2 sysmbols"),n.a.createElement("li",{className:"UpperCaseCheck"},"The first two characters must be Uppercase"),n.a.createElement("li",{className:"LowerCaseCheck"},"Must contain lowercase letters"),n.a.createElement("li",{className:"NumbersCheck"},"Must contain at 3 numbers")))),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Confirm Password"),n.a.createElement("input",{type:"password",onChange:this.handleConfirmPasswordChange,className:"form-control",ref:"cpassword",required:!0,placeholder:"Retype Password"}),n.a.createElement("small",{id:"ConfirmPasswordCheck"})),n.a.createElement("div",{className:"form-group"},n.a.createElement("input",{type:"submit",className:"btn btn-primary btn-block"})))),n.a.createElement(u.b,{to:"/",style:{color:"#007bff",textDecoration:"none"}},"Already have an ID? Login now"))))))}}]),t}(s.Component),v=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(m.a)(t).call(this))).sendEmail=function(e,t,a){E.a.get("https://techmybrand.com/sendmail.php?msg=".concat(a,"&subject=").concat(t,"&reciever=").concat(e)).then(function(e){console.log(e.data)})},e.handleSubmit=function(t){t.preventDefault();var a,s=e.refs.email.value,n=e.refs.password.value;sessionStorage.setItem("retry",!1);var r={email:s,password:n};E.a.post("/api/auth",r).then(function(t){if(t.data.length>0)e.setState({loginSuccess:!0}),a=0,console.log(t.data),sessionStorage.setItem("attempts",0),e.sendEmail(s,"Successful login","You have just logged in to your account on our test app. It are happy to have you back"),localStorage.setItem("userData",JSON.stringify(t.data));else{null!==sessionStorage.getItem("attempts")?a=sessionStorage.getItem("attempts"):(sessionStorage.setItem("attempts","0"),a=sessionStorage.getItem("attempts")),a=parseInt(a)+1,sessionStorage.setItem("attempts",a),a=sessionStorage.getItem("attempts");var n=null===sessionStorage.getItem("timeWaiting")?new Date(Date.now()+3e5):sessionStorage.getItem("timeWaiting");if(sessionStorage.setItem("timeWaiting",n),parseInt(sessionStorage.getItem("attempts"))>=3)n=new Date(Date.now()+3e5),console.log(!0),e.setState({retry:!0,timeWaiting:n}),e.sendEmail(s,"Failed Login Attempt","Someone has had 3 failed attempts trying to login using your email"),console.log(sessionStorage.getItem("timeWaiting")),sessionStorage.setItem("retry",!0),new Date(sessionStorage.getItem("timeWaiting")).getMinutes()-(new Date).getMinutes()<0?(console.log(!0),n=null,sessionStorage.setItem("attempts",0),sessionStorage.setItem("timeWaiting",null),sessionStorage.setItem("retry",!1),e.setState({retry:!1,err:"",timeWaiting:n})):(console.log(!0),n=new Date(sessionStorage.getItem("timeWaiting")),sessionStorage.setItem("attempts",a),sessionStorage.setItem("retry",!0),e.setState({retry:!0,err:"",timeWaiting:n}));else{var r={email:s,attempts:sessionStorage.getItem("attempts"),ipAddress:e.state.ipAddress,timeWaiting:sessionStorage.getItem("timeWaiting"),status:"unsuccessful"};e.setState(r),e.setState({err:"Your email or password is not correct"}),E.a.post("/api/update/".concat(s),r).then(function(e){console.log(e.data)})}}}).catch(function(e){console.log(e)})},e.state={email:"",password:"",attempts:0,ipAddress:"",timeWaiting:"",err:"",retry:!1,loginSuccess:!1},e}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;h.a.ajax({type:"GET",url:"https://ipapi.co/json/",cache:!1,success:function(t){e.setState({ipAddress:t.ip})}})}},{key:"render",value:function(){if(new Date(sessionStorage.getItem("timeWaiting")).getMinutes()-(new Date).getMinutes()<0&&sessionStorage.setItem("retry",!1),""!==this.state.err&&h()("#ValidateErrors").html('<div className="alert alert-warning"> '.concat(this.state.err," </div>")),"true"===sessionStorage.getItem("retry")){var e=new Date(sessionStorage.getItem("timeWaiting")).getMinutes()-(new Date).getMinutes();h()("#ValidateErrors").html('<div className="alert alert-danger"> You must wait  '.concat(e," minute(s) more before retrying </div>"))}return this.state.loginSuccess?(h()("#ValidateErrors").html('<div className="alert alert-success"> Login successful... </div>'),n.a.createElement(g.a,{to:"/home"})):n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-5 ml-auto mr-auto mt-4"},n.a.createElement("div",{className:"card",style:{marginTop:"50px",padding:30,borderRadius:20}},n.a.createElement("div",{className:"card-title"},n.a.createElement("h4",{className:"card-heading text-center"},"Welcome, Please login!"),n.a.createElement("hr",null)),n.a.createElement("div",{className:"card-body"},n.a.createElement("div",{id:"ValidateErrors"}),n.a.createElement("form",{onSubmit:this.handleSubmit},n.a.createElement("fieldset",null,n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Email"),n.a.createElement("input",{type:"email",className:"form-control",required:!0,ref:"email",placeholder:"Email address"})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Password"),n.a.createElement("input",{type:"password",className:"form-control",required:!0,ref:"password",placeholder:"Password"})),n.a.createElement("div",{className:"form-group"},n.a.createElement("input",{type:"submit",className:"btn btn-primary btn-block"})))),n.a.createElement(u.b,{to:"/register",style:{color:"#007bff",textDecoration:"none"}},"Don't have an ID? Register now"))))))}}]),t}(s.Component),y=a(16),S=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(m.a)(t).call(this))).state={data:"",loggedIn:!1},e.Logout=e.Logout.bind(Object(y.a)(e)),e}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){var e=localStorage.getItem("userData");e=JSON.parse(e),console.log(e),null!==e&&this.setState({data:e,loggedIn:!0})}},{key:"componentDidMount",value:function(){}},{key:"Logout",value:function(){localStorage.clear(),this.setState({data:"",loggedIn:!1})}},{key:"render",value:function(){return this.state.loggedIn?n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-8 ml-auto mr-auto mt-4"},n.a.createElement("div",{className:"card",style:{marginTop:"50px",padding:30,borderRadius:20}},n.a.createElement("div",{className:"card-title"},n.a.createElement("h3",{className:"card-heading"},"Welcome, Home"),n.a.createElement("span",{className:"btn btn-primary btn-sm btn-rounded",style:{float:"right"},onClick:this.Logout},"Logout")),n.a.createElement("div",{className:"card-body"},n.a.createElement("p",{className:"lead"},"Hello user ",this.state.data[0]._id,", thank you for your time. your account details is as follows:"),n.a.createElement("ul",{style:{listStyleType:"none"}},n.a.createElement("li",null,"Email: ",this.state.data[0].email),n.a.createElement("li",null,"Last loggedIn Ip: ",this.state.data[0].ipAddress))))))):n.a.createElement(g.a,{to:"/"})}}]),t}(s.Component),C=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return n.a.createElement(u.a,null,n.a.createElement(g.d,null,n.a.createElement(g.b,{exact:!0,path:"/",component:v}),n.a.createElement(g.b,{path:"/register",component:w}),n.a.createElement(g.b,{path:"/home",component:S})))}}]),t}(s.Component),N=(a(65),a(66),function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return n.a.createElement(s.Fragment,null,n.a.createElement(C,null))}}]),t}(s.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[32,1,2]]]);
//# sourceMappingURL=main.070a4781.chunk.js.map